<!DOCTYPE html>
<html>
    <head>
        <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml"/>
        <link rel='stylesheet' href='./stylesheets/editor.css' />
        <link rel="stylesheet" href="./vender/jquery/zTreeStyle/zTreeStyle.css" type="text/css">  <!--仅设计模式需要引用-->
        <script src = "./vender/jquery/jquery.js"></script>
        <script src = "./vender/jquery/jquery.ztree.core.min.js"></script> <!--仅设计模式需要引用-->
        <script src = "./vender/jquery/jquery.ztree.exedit.min.js"></script><!--仅设计模式需要引用-->
        <script src = "./vender/jquery/jquery.ztree.exhide.min.js"></script><!--仅设计模式需要引用-->
        <script src="./js/editor.js"></script> 
        <script>
          $(function() {
            //配置项可以不设置，会使用默认设置
            let option = {
                mode:'form',                     //form:表单模式，design:设计模式
                scale: .9,                       //缩放比例
                container:'#editor',             //编辑器容器对象ID
                baseUrl:'./',                    //基本URL
                saveUrl:'/doc/',                 //保存URL
                pdfUrl:'https://www.x-emr.cn/pdf/post',  //pdf生成服务
                dictionary:{                //知识库
                    treeUrl:'https://www.x-emr.cn/dicttree',    //树结构数据URL
                    itemUrl: 'https://www.x-emr.cn/dictitem'    //项数据URL，点击树节点传入节点code 和一级分类type, 如:dictitem?code=1001&type=1
                },
                referance:{                 //引用项
                    treeUrl:'https://www.x-emr.cn/refertree',   //树结构数据URL
                    itemUrl: 'https://www.x-emr.cn/referitem'   //项数据URL，点击树节点传入节点id, 如： dictitem?id=1001
                },
                toolbar :{
                    hide: false,                 //是否隐藏工具栏
                    disableCommand:['template'], //屏蔽文档命令，同时隐藏对应工具栏按钮
                    file : {hide : false},       //是否隐藏文件
                    start : {hide : false},      //是否隐藏开始
                    insert : {hide: false},      //是否隐藏插入
                    revision : {hide: false},    //是否隐藏审阅
                    page : {hide: false},        //是否隐藏页面
                    print : {hide:false},        //是否隐藏打印
                    export : {hide:false},       //是否隐藏导出
                    help : {hide: false}         //是否隐藏帮助
                },
                statusbar : {
                    hide: false                  //是否隐藏状态栏
                }
            }
            //编辑器初始化
            editor.init(option)

            //用于父页面调用
            if(window.frameElement){
                let id = window.frameElement.getAttribute('id')
                let doc =  window.frameElement.getAttribute('doc')
                
                parent[id] = editor
                //指定文档ID加载病历文档
                if(doc) editor.loadHtml(doc,'100').then(function(){
                    //设置文本
                    editor.setFieldTextById('patientName', '蒋华良')
                })
            }
          })
      </script>
    </head>
    <body>
        <!-- 默认id 为editor -->
        <div id="editor" style="width:100%; height:100%;"></div>
    </body>
</html>
